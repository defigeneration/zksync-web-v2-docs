# Введение в роллапы

### Введениие <a href="#introduction" id="introduction"></a>

Для лучшего понимания роллапов нам нужно ненадолго погрузиться в Ethereum и решения второго уровня (Layer 2, L2).

Сеть Ethereum часто перегружается, что ведет к замедлению транзакций и увеличению цен на газ. Такое положение дел сохраняется в течение длительного времени, и поэтому есть необходимость в более эффективном решении проблемы: такое, которое не будет иметь ограничений в пропускной способности, а вместо этого сможет достичь высокой скорости транзакций без необходимости жертвовать безопасностью. Как раз здесь и блистают решения второго уровня.

Решения 2го уровня спроектированы как расширения к Эфириум, и они предлагают различные решения, готовые стать улучшающим масштибируемость компонентом для легко перегружаемой сети Ethereum. Разбор всех решений 2го уровня выходит за рамки этой документации. Мы же в этом разделе быстро пробежимся по основным видам роллапов.

### Что такое роллапы? <a href="#what-are-rollups" id="what-are-rollups"></a>

Роллапы - это недавняя разработка, направленная на увеличение масштабируемости Эфириум с помощью офф-чейн расчетов, сворачивания многих транзакций в одну пачку и отправки их в основную сеть Эфириум в виде одного единственного действия. Вместо отправки каждой транзакции по отдельности операторы роллапа отправляют сумму всех необходимых изменений для репрезентации всех транзакций из пачки.

Для того, чтобы работать на роллапе, средства должны быть заблокированы в смарт-контракте в блокчейне 1го уровня (Layer 1, L1). Это позволяет транзакциям быть проведенными без оплаты накладных расходов за всю информацию, связанную с исполнением транзакции в основной сети. Роллапы значительно снижают время и комиссии за газ, связанные с проведением транзакций.

Главное различие между ZK и оптимистическими роллапами - это способ, которым пачка транзакций становится _финальной_.

#### Оптимистические роллапы vs. ZK роллапы <a href="#optimistic-rollups-versus-zk-rollups" id="optimistic-rollups-versus-zk-rollups"></a>

Есть два основных типа роллапов: ZK роллапы и Оптимистические роллапы.

#### Что такое ZK роллапы? <a href="#what-are-zk-rollups" id="what-are-zk-rollups"></a>

В ZK роллапах ('ZK' от zero-knowledge - нулевое разглашение\знание) пачка транзакций верифицируется на предмет правильности в сети Эфириум. После прохождения верификации пачка транзакций считается финальной, как любая другая транзакция в Эфириум. Это достигается мощностями криптографических _доказательств валидности (validity proofs)_ (обычно называют доказательствами нулевого разглашения/знания). Оператор ZK роллапа генерирует доказательство валидности, действительности для любой пачки офф-чейн транзакций. Как только доказательство сгенерировано, оно отправляется в Эфириум, где роллап пачка становится финальной. В zkSync это делается через **SNARK** (succinct non-interactive argument of knowledge - _краткий неинтерактивный аргумент знания_).

#### Что такое оптимистические роллапы? <a href="#what-are-optimistic-rollups" id="what-are-optimistic-rollups"></a>

Оптимистические роллапы, наоборот, не имеют механизма доказательства валидности офф-чейн транзакций. Вместо этого они считаются "оптимистичными", потому что они предполагают, что офф-чейн транзакции валидны, если не доказано обратное. Таким образом, они полагаются на _доказательство мошенничества (fraud proofs) -_ постановка под сомнение отправленного состояния на Эфириум. Если такое сомнение отправлено, оператор Оптимистического роллапа должен показать, что состояние и транзакции, поставленные под сомнение, на самом деле являются валидными. Это громоздкий процесс, и он требует наблюдателей, чтобы удостовериться, что оператор Оптимистического роллапа честен в любой момент времени.

### L1 и L2: какая разница между ними? <a href="#l1-and-l2-what-s-the-difference" id="l1-and-l2-what-s-the-difference"></a>

В децентрализованных экосистемах термин **уровень 1** (или **L1**) используется для обозначения базовой архитектуры первичной сети, такой как сеть Ethereum или Bitcoin. Блокчейн уровня 1 определяет правила протокола и финальность транзакций, а также выполняет базовые функции приложений, построенных на нем.

Термин **уровень 2** (или **L2**) используется для описания накладываемого приложения или сети, которая работает поверх сети уровня 1. Они чаще всего создаются для того, чтобы обеспечить дополнительные масштабируемые решения, принимая на себя часть транзакционных задач, чтобы облегчить воздействие на блокчейн 1-го уровня, ускоряя время транзакций и снижая газовые сборы.

В случае zkSync, основным блокчейном L1 является Ethereum, а сеть zkSync - это L2.
