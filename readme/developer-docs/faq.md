# FAQ

Здесь вы можете найти ответы на наиболее часто задаваемые вопросы о zkSync 2.0.

### Что такое zkSync 2.0? <a href="#what-is-zksync-2-0" id="what-is-zksync-2-0"></a>

zkSync 2.0 - это роллап с нулевым разглашением (ZK Rollup), который поддерживает общую совместимость с EVM (Ethereum Virtual Machine) блокчейна Эфириум. Основное преимущество zkSync 2.0 в том, что разработчики, уже создавшие dApp для EVM, могут портировать их без особых усилий и получить значительное уменьшение в стомости и скорости транзакций, при этом наследуя безопасность и децентрализацию Эфириума.

### Почему zkSync 2.0? <a href="#why-zksync-2-0" id="why-zksync-2-0"></a>

zkSync 2.0 - это гигантский скачок в технологиях Layer 2. Это - долгожданное решение, предлагающее множество ранее недоступных для разработчиков Ethereum преимуществ.

* **EVM-совместимость** - zkSync - это EVM-совместимый ZK rollup, который поддерживает большинство распространненых смарт-контрактов EVM. Это значит, что, если у вас есть смарт-контракт для EVM, вы с легкостью можете портировать свой dApp на zkSync 2.0.
* **Этос-совместимость** - мы крайне привержены ценностям децентрализации и открытого исходного кода. Весь наш код будет полностью открытым и zkSync будет следовать дорожной карте, которая предполагает полную децентрализацию секвенсора и генерации доказательств. Более того, мы будем исполнять дорожную карту по децентрализации всей нашей организации.
* **Уверенность** - в отличие от предыдущих методов, пытающихся предлагать решения по масштабированию Эфириума, которые в некоторых случаях предлагали меньшие гарантии безопасности, чем L1 (например, сайдчейны, плазма, оптимистический роллап), zkSync использует доказательства с нулевым разглашением, которые предлагают _100% безопасность_.
* **Перспективность** - экосистемные проекты, адаптирующие zkSync 2.0 сейчас, в будущем будут наслаждаться всеми улучшениями технологий без необходимости менять код. Среди ожидаемых улучшений:
  1. Технология прувера (доказатель (через ускорение/улучшение аппаратного обеспечения).
  2. Компилятор (интеграция современных языков пограммирования с поддержкой виртуальных машин низкого уровня - LLVM).
  3. Все новшества zkSync 3.0 (Гиперчейны и Гипермосты).

### Что такое zkEVM? <a href="#what-is-the-zkevm" id="what-is-the-zkevm"></a>

zkEVM - это название архитектуры, которая позволяет генерировать доказательство c нулевым разглашением для отслеживания исполнения смарт-контрактов, изначально написанных под Ethereum.

Его архитектура основана на следующих компонентах:

* zkVM, полная по Тьюрингу RISC-подобная виртуальная машина, оптимизированная для доказывания в схеме ZKP (zero-knowledge proof - доказательство с нулевым разглашением). Она имеет несколько различных реализаций:
  * Исполнитель: быстрое нативное исполнение на CPU.
  * Генератор свидетельства: нативный исполнитель для генерации свидетельства ZKP.
  * Прувер(prover): собственно реализация схемы ZKP (доказательства с нулевым разглашением)
* Компилятор, основанный на LLVM с:
  * Фронтендом Solidity (точнее: фронтенд Yul).
  * Фронтендом Vyper.
  * Бэкендом zkVM.
* Схемы специального назначения (сильно полагаются на кастомные врата \[custom gates] и таблицы поиска\[lookup tables] PLONK) в виде “прекомпилятов” для вычислительноемких операций, таких как:
  * Неалгебраические хэши (Keccak, SHA256, Blake2).
  * Доступ к хранилищу (пути Merkle).
  * Пары эллиптических кривых.
* Схема рекурсивной аггрегации (комбинирует доказательства с вышеупомянутыми элементами).

#### zkEVM vs EVM <a href="#zkevm-vs-evm" id="zkevm-vs-evm"></a>

Помимо различий в операционных кодах (опкод) и расчетах газа, zkVM строго наследует программную модель EVM и ее инварианты, включая конвенции по вызову ABI. Одна важная вещь, которую нужно упомянуть - zkVM поддерживает откаты и доказуемо обратимые транзакции. Это гарантирует взаимную безопасность: пользователи не могут затормозить сеть путем ее бомбардировки обратимыми транзакциями, а запасной люк (в виде приоритетной очереди) защищает возможность пользователя включать любые транзакции в блоки.

Как результат, разработчики могут полностью положиться на резистентность к цензуре, предоставляемую со стороны L1 без необходимости вносить какие-либо изменения, связанные с механизмом запасного люка. Это значит, что активы на аккаунте zkRollup на zkSync будут иметь абсолютно те же гарантии безопасности, что и аккаунты на L1.

#### Улучшения EVM <a href="#evm-improvements" id="evm-improvements"></a>

Помимо поддержки максимально возможной совместимости, zkEVM имеет значительные преимущества перед EVM, которые позволяют упростить адаптацию и предоставить преимущества экосистемным проектам zkSync.

* **Наш компилятор основан на LLVM**. Основанные на LLVM (Low-Level Virtual Machine) компиляторы стали компиляторами по умолчанию для систем Mac OS X, iOS, FreeBSD и Android, и они являются наиболее широко используемыми, потому что они:
  * Позволяют нам увеличивать эффективность по сравнению с оригинальным байткодом, потому что с LLVM мы можем получить преимущество от многих оптимизаций и инструментов, доступных в этой зрелой экосистеме.
  * Прокладывают путь так, чтобы мы могли добавить поддержку интеграции кодовых баз на других языках программирования с фронтендом LLVM. Таким образом, разработчики смогут строить приложения и использовать блокчейны способами, недоступными на данный момент.
* **В наш zkEVM включена поддержка Абстракции Аккаунта**. Это - долгожданная функция в сообществе Эфириум-разработчков, которая улучшает принятие разработчиками и пользовательский опыт несколькими путями:
  * Нативная поддержка кошельков-смарт-контрактов (таких как Argent), что критически важно для привлечения мейнстрим-пользователей.
  * Гораздо лучший пользовательский опыт для мульти-подписей.
  * Транзакционные комиссии могут быть оплачены любым токеном при использовании [paymaster](https://v2-docs.zksync.io/dev/developer-guides/aa.html#paymasters)'ов.
  * Протоколы теперь могут субсидировать газ для пользователей прямо со своих смарт-контрактов, или даже подключать безгазовые транзакции.
  * Наборы транзакций (multicall) могут быть подтверждены одним кликом (огромная проблема пользовательного опыта в Ethereum на сегодняшний день).
  * [Узнайте больше о поддержке абстракции аккаунта в zkSync 2.0.](https://v2-docs.zksync.io/dev/developer-guides/aa.html)

### EVM-совместимость <a href="#evm-compatibility" id="evm-compatibility"></a>

Среди сообщества существуют заблуждения касательно различий между EVM-совместимостью и EVM-эквивалентностью. Для начала давайте определим, что эти оба термина означают.

* **Эквивалент EVM** значит, что данный протокол поддерживает любой опкод EVM Эфириума вплоть до уровня байткода. Таким образом, любой EVM-смарт-контракт будет со 100% уверенностью работать "из коробки".
* **Совеместимость с EVM** значит, что поддерживается какой-то процент опкодов EVM Эфириум; таким образом, какой-то процент смарт-контрактов будет работать "из коробки".

zkSync оптимизирован под EVM-_совместимость_, а не под _эквивалентность_ по трем основным причинам:

1. Создание генерализированной схемы для EVM-эквивалентности вплоть до байткода было бы непростительно дорого и времязатратно.
2. Мы смогли спроектировать систему, оптимизированную под производительность и доказуемость с нулевым разглашением (ZK), ведя разработку на основе опыта с zkSync 1.0.
3. Опкоды, которые мы решили НЕ поддживать или считаются устаревшими на самом Ethereum, или используются крайне редко. В случае, если проекту они (опкоды) понадобятся, то необходимое количество модификаций кода для работы с zkSync - минимально, и нет необходимости в дополнительном аудите безопасности.

Практически любой смарт-контракт, написанный под EVM будет поддерживаться в zkSync 2.0 и сохранит в себе все ключевые инварианты безопасности, так что в абсолютном большинстве случаев повторного аудита безопасности не потребуется. Исключением являются контракты, использующие следующие опкоды EVM:

* `CALLCODE` (объявлен устаревшим на Эфириуме в пользу `DELEGATECALL`).
* `EXTCODECOPY` (может быть реализован при необходимсоти, но на данный момент мы его пропустили, потому что опкоды zkEVM все равно не идентичны опкодам EVM)
* `SELFDESTRUCT` (считается вредным и есть призывы о его отключении на L1).
* `CODECOPY` - (он не возвращает 0, но вызывает ошибку компиляции).

Есть еще несколько различий, например, вычисление газа будет иным (что также применимо и к другим L2 решениям). Некоторые криптографически прекомпиляты EVM (а точнее пары и RSA) не будут доступны в первом релизе, но будут реализованы вскоре после запуска, при этом криптографические пары будут приоритетом, чтобы позвонить и Гиперчейнам, и протоколам по типу Aztec/Dark Forest также развертываться без дополнительных модификаций.

#### Ожидания по безопаности <a href="#security-expectations" id="security-expectations"></a>

Уровень доступа к данным дляzkSync 2.0 - Ethereum. Все участники экосистемы, которые ведут разработку на zkSync 2.0, унаследуют все преимущества в безопасности Ethereum.

Очевидно, что для нас эта тема критически важна, и мы находимся в процессе обширного пересмотра безопасности zkSync 2.0 (включая внешние аудиты, соревнования по безопасности, пересмотр и расширение нашей программы по поиску багов).

Мы вскоре расскажем об этом здесь более распространенно.

#### Инициирование аудитов безопасности <a href="#triggering-security-audits" id="triggering-security-audits"></a>

Хоть и существует несколько редко используемых опкодов, которые мы не поддерживаем, мы с участниками экосистемы не обнаружили ни одного случая, где критическим изменением было что-либо, кроме простого рефакторинга нескольких строк кода. Ни один из участников нашей экосистемы, кто портировался на zkSync, не докладывал о каких-либо изменениях, которые потребовали бы повторного аудита безопасности.

### Что такое Абстракция Аккаунта <a href="#what-is-account-abstraction" id="what-is-account-abstraction"></a>

В zkSync 2.0 Абстракция Аккаунта реализована нативно, то есть, аккаунты могут инициировать транзакции, как EOA (Externally Owned Account - обычный адрес), но также могут иметь произвольную логику в реализации, как смарт-контракт.

Если вы хотите лучше понять, как выглядит Абстракци Аккаунта в zkSync, то можете прочесть [этот раздел документации](https://v2-docs.zksync.io/dev/developer-guides/aa.html) или опробовать [наше руководство](https://v2-docs.zksync.io/dev/tutorials/custom-aa-tutorial.html).

### zkSync 2.0 vs. Альтернативные решения <a href="#zksync-2-0-vs-alternatives" id="zksync-2-0-vs-alternatives"></a>

#### **zkSync 2.0 vs Оптимистические Роллапы** <a href="#zksync-2-0-vs-optimistic-rollups" id="zksync-2-0-vs-optimistic-rollups"></a>

Оптимистические роллапы, такие как Arbitrum & Optimism используют оптимистический подход в защите своих сетей. Во время их разработки они предложили важное постепенное улучшение по сравнению с другими доступными опциями. Однако, широко популярное мнение ([включая Виталика Бутерина](https://coinculture.com/au/people/vitalik-buterin-zk-rollups-to-outperform-optimistic-rollups/)) состоит в том, что оптимистические методы представляют из себя лишь очередное временное решение, и в долгосрочной перспективе единственными постоянным и по-настоящему масштабируемым решением будут блокчейны, основанные на ZK-доказательствах (доказательствах с нулевым разглашением).

Оптимистические роллапы страдают от следующих ключевых проблем:

* **Оптимистические роллапы полагаются на теорию игр в обеспечении безопасности.** Этот метод предполагает, что все транзакции валидны (действительны) и затем использует механизм пост-фактум-теории игр, чтобы выдать участникам сети награды за нахождение мошеннических или иных невалидных\недействительных (напр из-за багов) транзакций. Теория игр не может работать идеально и, так как теория игр не сработала со стейблкоинами (Terra Luna) и другими системами, мы просто напросто не считаем, что на нее можно положиться в долгосрочной перспективе и на маштабном уровне для обеспечения требований безопасности экосистемы. _zkSync 2.0 же, с другой стороны, полагается не на теорию игр, а на математику для обеспечения абсолютной уверенности в том, что каждая транзакция доказуемо валидна и не является мошеннической._
* **Оптимистические методы требуют 7 дней  для завершения расчетов транзакций.** Время расчета становится все более важным параметром для экосистемных проектов. С ростом  их потребностей запрос на быстрый расчет транзакций вырастет. При использовании оптимистических методов эта проблема никуда не денется. Всегда будет 7-дневный расчет, потому что оптимистическим методам требуется 7 дней проверки для закрытия окна сомнениия по пост-фактум-теории игр. Единственный путь обхода этой проблемы - это привлечение третьих лиц, которые предоставят ликвидность. Но, опять таки, доверие поставщикам ликвидности - это еще одна угроза безопасности. _Когда zkSync 2.0 запустится в основной сети (Mainnet), он будет иметь время расчета транзакций расчитываемое в часах. В будущем, после нескольких месяцев работы, мы нацелены на время расчета транзакций исчисляемое в минутах - при всем при этом экосистемным проектам не придется переписывать код._
* &#x20;**У оптимистических роллапов нет методов масштабируемости за рамками текущих значений.** Когда появились первые оптимистические решения, они стали популярными, потому что они масштабировали Ethereum (например, они позволяли проводить х10 транзакций Эфириум _без деградации безопасности и децентрализации_). Проблема в том, что имея возможность масштабировать Эфириум в 10 раз сейчас, у них нет механизма выхода из этого лимита в х10 без компрометации безопасности и децентрализации. _В противовес, zkSync 2.0 основан на доказательствах с нулевым разглашением, которые имеют важные преимуещства, которых не имеют оптимистические методы - они могут гипермасштабироваться._

#### zkSync 2.0 vs другие zkРоллапы <a href="#zksync-2-0-vs-other-zkrollups" id="zksync-2-0-vs-other-zkrollups"></a>

Хотя все блокчейны, основанные на технологии доказательств с нулевым разглашением разделяют фундаментальную технологию криптографических доказательств, все равн осреди них существует много важных разлиций.



**zkSync против Starkware.**&#x20;

Когда вы сравниваете zkSync со Starkware, главное, что вы увидите - это две различных стратегии, где zkSync оптимизируется под совместимость с экосистемой, технологией и этосом Ethereum, тогда как Starkware оптимизируется под теоретические выигрыши в производительности за счет компромисса в совместимости.

* **EVM.** zkSync совместим с EVM  vs. Starknet НЕ совместим с EVM.
* **Инструментарий**. zkSync совместим по инструментарию с EVM vs. Starknet НЕТ и требует того, чтобы люди изучали абсолютно новый инструментарий, построенный вокруг собственного языка программирования Cairo.
* **Экосистема**. Экосистема zkSync естественным образом работает со всеми инструментами экосистемы Эфириум vs. Starkware пытается разогнать совершенно новую экосистему с новыми инструментами.
* **Децентрализация**. zkSync "обнимает" децентрализацию, как на уровне технологий, так и на уровне организации vs. Starknet НЕ "обнимает" децентрализацию.
* **Открытый исходный код.** Исходный код zkSync полностью открыт vs. код Starkware таковым НЕ является.

### Какие кошельки поддерживаются? <a href="#which-wallets-are-supported" id="which-wallets-are-supported"></a>

В данный момент мы поддерживаем любой Эфириум-кошелек. По умолчанию, основная опция на портале zkSync 2.0 - Metamask. Помимо автоматического подключения, вы можете добавить сеть zkSync в ваш Metamask вручную:

**Testnet network info**

* Network Name: `zkSync alpha testnet`
* New RPC URL: `https://zksync2-testnet.zksync.dev`
* Chain ID: `280`
* Currency Symbol: `ETH`
* Block Explorer URL: `https://goerli.explorer.zksync.io/`
* WebSocket URL: `wss://zksync2-testnet.zksync.dev/ws`

**Mainnet network info**

* Network Name: `zkSync mainnet`
* New RPC URL: `https://zksync2-mainnet.zksync.io`
* Chain ID: `324`
* Currency Symbol: `ETH`
* Block Explorer URL: `https://explorer.zksync.io/`
* WebSocket URL: `wss://zksync2-mainnet.zksync.io/ws`

### Как запросить средства для  тестнета? <a href="#how-do-i-request-funds-for-testnet" id="how-do-i-request-funds-for-testnet"></a>

Для доступа к средствам на тестнете вы можете использовать [Faucet(кран)](https://portal.zksync.io/faucet), отправив твит о нас, и получить немного токенов. Убедитесь, что сообщение в Twitter содержит ваш Ethereum адрес, на который мы отправим средства, и то, что это не ваш основном Эфириум аккаунт. Кран не сработает, если это новый Twitter-аккаунт и не имеет аватара.

В качестве альтернативы вы может использовать [наш мост](https://portal.zksync.io/bridge) для переноса ETH с сети Goerli на zkSync 2.0 alpha testnet.

### Как много вермени займет транзакция депозита? <a href="#how-long-does-it-take-to-complete-a-deposit-transaction" id="how-long-does-it-take-to-complete-a-deposit-transaction"></a>

Транзакции на zkSync 2.0 не должны занимать более 5 минут.

### Где я могу посмотреть свои отправленные транзакции? <a href="#where-can-i-see-the-transactions-i-submitted" id="where-can-i-see-the-transactions-i-submitted"></a>

Наш [обозреватель блоков](https://explorer.zksync.io/) покажет вам все, что нужно касательно транзакций.&#x20;

### Какой лимит хранилища для смарт-контрактов на zkSync 2.0? <a href="#what-is-the-storage-limit-for-smart-contract-on-zksync-2-0" id="what-is-the-storage-limit-for-smart-contract-on-zksync-2-0"></a>

Текущий лимит составляет 3600000000 ergs.

### Могу ли я вывести свои средства назад в Ethereum? <a href="#can-i-withdraw-my-funds-back-to-ethereum" id="can-i-withdraw-my-funds-back-to-ethereum"></a>

Да, мост является двусторонним. Вы можете вывести свои средства назад в Ethereum. Процесс вывода займет до 1 часа, в зависимости от нагрузки на сеть zkSync.

### Взаимодействие - пошаговое руководство <a href="#interacting-a-step-by-step-guide" id="interacting-a-step-by-step-guide"></a>

Так как тестнет проводится в сети Goerli, в первую очередь вам понадобится немного Goerli ETH. Попробуйте один из следующих кранов:

* [https://goerli-faucet.mudit.blog/](https://goerli-faucet.mudit.blog/)
* [https://faucets.chain.link/goerli](https://faucets.chain.link/goerli)
* [https://goerli-faucet.slock.it/](https://goerli-faucet.slock.it/)
* [https://goerlifaucet.com/](https://goerlifaucet.com/)

**Шаг 1**

Отправляйтесь  на [https://portal.zksync.io/ ](https://portal.zksync.io/)и подключите свой кошелек. Вам автоматически будет предложено добавить сеть  “zkSync 2.0 testnet Goerli”.

Вы также можете добавить сеть в Метамаск вручную:

* Network Name: `zkSync alpha testnet`
* RPC URL: `https://zksync2-testnet.zksync.dev`
* Chain ID: `280`

**Шаг 2 (Пропустите, если у вас нет Goerli ETH)**

Сначала мы идем на “Bridge”, а затем делаем “Deposit” чтобы внести немного ETH на zkSync 2.0.

<figure><img src="../../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

**Шаг 3**

Далее мы направляемся к “Faucet” чтобы получить немного тестовых токенов $ETH, $LINK, $DAI, $WBTC и $USDC на наш адрес zkSync.

<figure><img src="../../.gitbook/assets/image (7).png" alt=""><figcaption></figcaption></figure>

Проверьте свой баланс на вкладке “Balances” после запроса.

<figure><img src="../../.gitbook/assets/image (3) (2).png" alt=""><figcaption></figcaption></figure>

**Шаг 4**

Теперь перейдем к “Transfer”. Вставьте адрес другого кошелька и переведите на него немного токенов. Оплатите комиссию в DAI, если у вас нет ETH.

<figure><img src="../../.gitbook/assets/image (9).png" alt=""><figcaption></figcaption></figure>

**Step 5**

Наконец, мы направляемся к “Withdraw” для вывода DAI с zkSync назад на Goerli. Оплатите комиссию в DAI, если у вас нет ETH.

<figure><img src="../../.gitbook/assets/image (2) (1).png" alt=""><figcaption></figcaption></figure>

### Что такое РеГенезис тестнета? <a href="#what-is-a-testnet-regenesis" id="what-is-a-testnet-regenesis"></a>

Время от времени команда, работающая над zkSync будет инициировать регенезис в тестнете - рестарт блокчейна, которые принесет с собой обновления и обнулит состояние сети. Этого не будет происходить в основной сети, и маловероятно в тестнете после запуска основной сети.
