# FAQ

Здесь вы можете найти ответы на наиболее частые вопросы о zkSync 2.0.

### Что такое zkSync 2.0? <a href="#what-is-zksync-2-0" id="what-is-zksync-2-0"></a>

zkSync 2.0 - это роллап с нулевым разглашением (ZK Rollup), который поддерживает общую совместимость с EVM (Ethereum Virtual Machine) блокчейна Эфириум. Основная выгода zkSync 2.0 в том, что разработчики, уже создавшие dApp для EVM, могут портировать их без особых усилий и получить значительное уменьшение в стомости и скорости транзакций, и при этом наследуя безопасность и децентрализацию Эфириума.

### Почему zkSync 2.0? <a href="#why-zksync-2-0" id="why-zksync-2-0"></a>

zkSync 2.0 - это гигантский скачок в технологиях Layer 2. Это - долгожданное решение, предлагающее множество ранее недоступных для разработчиков Ethereum преимуществ.

* **EVM-совместимость** - zkSync - это EVM-совместимый ZK rollup, который поддерживает большинство распространненых смарт-контрактов EVM. Это значит, что, если у вас есть смарт-контракт для EVM, вы с легкостью можете портировать свой dApp на zkSync 2.0.
* **Этос-совместимость** - мы крайне привержены ценностям децентрализации и открытого исходного кода. Весь наш код будет полностью открытым и zkSync будет следовать дорожной карте, которая предполагает полную децентрализацию секвенсора и генерации доказательств. Более того, мы будем исполнять дорожную карту по децентрализации всей нашей организации.
* **Уверенность** - в отличие от предыдущих методов, пытающихся предлагать решения по масштабированию Эфириума, которые в некоторых случаях предлагали меньшие гарантии безопасности, чем L1 (например, сайдчейны, плазма, оптимистический роллап), zkSync использует доказательства с нулевым разглашением, которые предлагают _100% безопасность_.
* **Перспективность** - экосистемные проекты, адаптирующие zkSync 2.0 сейчас, в будущем будут наслаждаться всеми улучшениями технологий без необходимости менять код. Среди ожидаемых улучшений:
  1. Технология прувера (доказатель (через ускорение/улучшение аппаратного обеспечения).
  2. Компилятор (интеграция современных языков пограммирования с поддержкой виртуальных машин низкого уровня - LLVM).
  3. Все новшества zkSync 3.0 (Гиперчейны и Гипермосты).

### Что такое zkEVM? <a href="#what-is-the-zkevm" id="what-is-the-zkevm"></a>

zkEVM - это название архитектуры, которая позволяет генерировать доказательство c нулевым разглашением для отслеживания исполнения смарт-контрактов, изначально написанных под Ethereum.

Его архитектура основана на следующих компонентах:

* zkVM, полная по Тьюрингу RISC-подобная виртуальная машина, оптимизированная для доказывания в схеме ZKP (zero-knowledge proof - доказательство с нулевым разглашением). Она имеет несколько различных реализаций:
  * Исполнитель: быстрое нативное исполнение на CPU.
  * Генератор свидетельства: нативный исполнитель для генерации свидетельства ZKP.
  * Прувер(prover): собственно реализация схемы ZKP (доказательства с нулевым разглашением)
* Компилятор, основанный на LLVM с:
  * Фронтендом Solidity (точнее: фронтенд Yul).
  * Фронтендом Vyper.
  * Бэкендом zkVM.
* Схемы специального назначения (сильно полагаются на кастомные врата \[custom gates] и таблицы поиска\[lookup tables] PLONK) в виде “прекомпилятов” для вычислительноемких операций, таких как:
  * Неалгебраические хэши (Keccak, SHA256, Blake2).
  * Доступ к хранилищу (пути Merkle).
  * Пары эллиптических кривых.
* Схема рекурсивной аггрегации (комбинирует доказательства с вышеупомянутыми элементами).

#### zkEVM vs EVM <a href="#zkevm-vs-evm" id="zkevm-vs-evm"></a>

Помимо различий в операционных кодах (опкод) и расчетах газа, zkVM строго наследует программную модель EVM и ее инварианты, включая конвенции по вызову ABI. Одна важная вещь, которую нужно упомянуть - zkVM поддерживает откаты и доказуемо обратимые транзакции. Это гарантирует взаимную безопасность: пользователи не могут затормозить сеть путем ее бомбардировки обратимыми транзакциями, а запасной люк (в виде приоритетной очереди) защищает возможность пользователя включать любые транзакции в блоки.

Как результат, разработчики могут полностью положиться на резистентность к цензуре, предоставляемую со стороны L1 без необходимости вносить какие-либо изменения, связанные с механизмом запасного люка. Это значит, что активы на аккаунте zkRollup на zkSync будут иметь абсолютно те же гарантии безопасности, что и аккаунты на L1.

#### Улучшения EVM <a href="#evm-improvements" id="evm-improvements"></a>

Помимо поддержки максимально возможной совместимости, zkEVM имеет значительные преимущества перед EVM, которые позволяют упростить адаптацию и предоставить преимущества экосистемным проектам zkSync.

* **Наш компилятор основан на LLVM**. Основанные на LLVM (Low-Level Virtual Machine) компиляторы стали компиляторами по умолчанию для систем Mac OS X, iOS, FreeBSD и Android, и они являются наиболее широко используемыми, потому что они:
  * Позволяют нам увеличивать эффективность по сравнению с оригинальным байткодом, потому что с LLVM мы можем получить преимущество от многих оптимизаций и инструментов, доступных в этой зрелой экосистеме.
  * Прокладывают путь так, чтобы мы могли добавить поддержку интеграции кодовых баз на других языках программирования с фронтендом LLVM. Таким образом, разработчики смогут строить приложения и использовать блокчейны способами, недоступными на данный момент.
* **В наш zkEVM включена поддержка Абстракции Аккаунта**. Это - долгожданная функция в сообществе Эфириум-разработчков, которая улучшает принятие разработчиками и пользовательский опыт несколькими путями:
  * Нативная поддержка кошельков-смарт-контрактов (таких как Argent), что критически важно для привлечения мейнстрим-пользователей.
  * Гораздо лучший пользовательский опыт для мульти-подписей.
  * Транзакционные комиссии могут быть оплачены любым токеном при использовании [paymaster](https://v2-docs.zksync.io/dev/developer-guides/aa.html#paymasters)'ов.
  * Протоколы теперь могут субсидировать газ для пользователей прямо со своих смарт-контрактов, или даже подключать безгазовые транзакции.
  * Наборы транзакций (multicall) могут быть подтверждены одним кликом (огромная проблема пользовательного опыта в Ethereum на сегодняшний день).
  * [Узнайте больше о поддержке абстракции аккаунта в zkSync 2.0.](https://v2-docs.zksync.io/dev/developer-guides/aa.html)

### EVM-совместимость <a href="#evm-compatibility" id="evm-compatibility"></a>

Среди сообщества существуют заблуждения касательно различий между EVM-совместимостью и EVM-эквивалентностью. Для начала давайте определим, что эти оба термина означают.

* **Эквивалент EVM** значит, что данный протокол поддерживает любой опкод EVM Эфириума вплоть до уровня байткода. Таким образом, любой EVM-смарт-контракт будет со 100% уверенностью работать "из коробки".
* **Совеместимость с EVM** значит, что поддерживается какой-то процент опкодов EVM Эфириум; таким образом, какой-то процент смарт-контрактов будет работать "из коробки".

zkSync оптимизирован под EVM-_совместимость_, а не под _эквивалентность_ по трем основным причинам:

1. Создание генерализированной схемы для EVM-эквивалентности вплоть до байткода было бы непростительно дорого и времязатратно.
2. Мы смогли спроектировать систему, оптимизированную под производительность и доказуемость с нулевым разглашением (ZK), ведя разработку на основе опыта с zkSync 1.0.
3. Опкоды, которые мы решили НЕ поддживать или считаются устаревшими на самом Ethereum, или используются крайне редко. В случае, если проекту они (опкоды) понадобятся, то необходимое количество модификаций кода для работы с zkSync - минимально, и нет необходимости в дополнительном аудите безопасности.

Практически любой смарт-контракт, написанный под EVM будет поддерживаться в zkSync 2.0 и сохранит в себе все ключевые инварианты безопасности, так что в абсолютном большинстве случаев повторного аудита безопасности не потребуется. Исключением являются контракты, использующие следующие опкоды EVM:

* `CALLCODE` (объявлен устаревшим на Эфириуме в пользу `DELEGATECALL`).
* `EXTCODECOPY` (может быть реализован при необходимсоти, но на данный момент мы его пропустили, потому что опкоды zkEVM все равно не идентичны опкодам EVM)
* `SELFDESTRUCT` (считается вредным и есть призывы о его отключении на L1).
* `CODECOPY` - (он не возвращает 0, но вызывает ошибку компиляции).

Есть еще несколько различий, например, вычисление газа будет иным (что также применимо и к другим L2 решениям). Некоторые криптографически прекомпиляты EVM (а точнее пары и RSA) не будут доступны в первом релизе, но будут реализованы вскоре после запуска, при этом криптографические пары будут приоритетом, чтобы позвонить и Гиперчейнам, и протоколам по типу Aztec/Dark Forest также развертываться без дополнительных модификаций.

#### Ожидания по безопаности <a href="#security-expectations" id="security-expectations"></a>

Уровень доступа к данным дляzkSync 2.0 - Ethereum. Все участники экосистемы, которые ведут разработку на zkSync 2.0, унаследуют все преимущества в безопасности Ethereum.

Очевидно, что для нас эта тема критически важна, и мы находимся в процессе обширного пересмотра безопасности zkSync 2.0 (включая внешние аудиты, соревнования по безопасности, пересмотр и расширение нашей программы по поиску багов).

Мы вскоре расскажем об этом здесь более распространенно.

#### Инициирование аудитов безопасности <a href="#triggering-security-audits" id="triggering-security-audits"></a>

Хоть и существует несколько редко используемых опкодов, которые мы не поддерживаем, мы с участниками экосистемы не обнаружили ни одного случая, где критическим изменением было что-либо, кроме простого рефакторинга нескольких строк кода. Ни один из участников нашей экосистемы, кто портировался на zkSync, не докладывал о каких-либо изменениях, которые потребовали бы повторного аудита безопасности.

### Что такое Абстракция Аккаунта <a href="#what-is-account-abstraction" id="what-is-account-abstraction"></a>

В zkSync 2.0 Абстракция Аккаунта реализована нативно, то есть, аккаунты могут инициировать транзакции, как EOA (Externally Owned Account - обычный адрес), но также могут иметь произвольную логику в реализации, как смарт-контракт.

Если вы хотите лучше понять, как выглядит Абстракци Аккаунта в zkSync, то можете прочесть [этот раздел документации](https://v2-docs.zksync.io/dev/developer-guides/aa.html) или опробовать [наше руководство](https://v2-docs.zksync.io/dev/tutorials/custom-aa-tutorial.html).

### zkSync 2.0 vs. Альтернативные решения <a href="#zksync-2-0-vs-alternatives" id="zksync-2-0-vs-alternatives"></a>

#### **zkSync 2.0 vs Оптимистические Роллапы** <a href="#zksync-2-0-vs-optimistic-rollups" id="zksync-2-0-vs-optimistic-rollups"></a>

Оптимистические роллапы, такие как Arbitrum & Optimism используют оптимистический подход в защите своих сетей. Во время их разработки они предложили важное постепенное улучшение по сравнению с другими доступными опциями. Однако, широко популярное мнение ([включая Виталика Бутерина](https://coinculture.com/au/people/vitalik-buterin-zk-rollups-to-outperform-optimistic-rollups/)) состоит в том, что оптимистические методы представляют из себя лишь очередное временное решение, и в долгосрочной перспективе единственными постоянным и по-настоящему масштабируемым решением будут блокчейны, основанные на ZK-доказательствах (доказательствах с нулевым разглашением).

Оптимистические роллапы страдают от следующих ключевых проблем:

* **Оптимистические роллапы полагаются на теорию игр в обеспечении безопасности.** Этот метод предполагает, что все транзакции валидны (действительны) и затем использует механизм пост-фактум-теории игр, чтобы выдать участникам сети награды за нахождение мошеннических или иных невалидных\недействительных (напр из-за багов) транзакций. Теория игр не работает идеально
* **Optimistic rollups are secured via game theory.** This method assumes all transactions are valid and then utilizes an after-the-fact game theory mechanism to pay participants to discover fraudulent or otherwise invalid (e.g. because of bugs) transactions. Game theory is never perfect and as with the game theory that broke with stablecoins and other systems, we just don’t think it can be relied on in the long term and at true scale to offer the security the ecosystem needs. _zkSync 2.0, on the other hand, relies on math, not game theory, to provide the absolute certainty of proof that every single transaction is provably valid and not fraudulent._
* **Optimistic methods take 7 days to settle**. Settlement time is becoming an increasingly important feature for ecosystem projects. As ecosystem projects’ needs mature, the need for as close to instant settlement will rise. With optimistic methods, this settlement problem will not go away. It's always going to be a 7-day settlement time because optimistic methods need 7 days for their after-the-fact game theory to conclude its challenge window. The only way around this is to bring in third parties that provide some liquidity - but then again this is a potential security risk in trusting the liquidity providers. _When zkSync 2.0 initially launches on Mainnet, it will provide settlement in hours but we are targeting settlement within minutes after months of work - and as we improve settlement times to near zero - no partner needs to change any code_.
* **Optimistic rollups have no method of scaling beyond where they are now.** When optimistic methods first came out, they became popular because they scaled Ethereum - (e.g. they enabled the processing of 10x Ethereum transactions \*\*\*\*without degradation of security and decentralization). The problem is that while they can scale Ethereum by 10x now, they have no mechanism to go beyond 10x without degrading security and decentralization. _In contrast, zkSync 2.0 is based on zero-knowledge proofs which have important characteristics that optimistic methods do not - they can hyperscale._

#### [#](https://v2-docs.zksync.io/dev/fundamentals/faq.html#zksync-2-0-vs-other-zkrollups)zkSync 2.0 vs other zkRollups <a href="#zksync-2-0-vs-other-zkrollups" id="zksync-2-0-vs-other-zkrollups"></a>
