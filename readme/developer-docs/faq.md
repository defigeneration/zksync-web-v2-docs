# FAQ

Здесь вы можете найти ответы на наиболее частые вопросы о zkSync 2.0.

### Что такое zkSync 2.0? <a href="#what-is-zksync-2-0" id="what-is-zksync-2-0"></a>

zkSync 2.0 - это роллап с нулевым разглашением (ZK Rollup), который поддерживает общую совместимость с EVM (Ethereum Virtual Machine) блокчейна Эфириум. Основная выгода zkSync 2.0 в том, что разработчики, уже создавшие dApp для EVM, могут портировать их без особых усилий и получить значительное уменьшение в стомости и скорости транзакций, и при этом наследуя безопасность и децентрализацию Эфириума.

### Почему zkSync 2.0? <a href="#why-zksync-2-0" id="why-zksync-2-0"></a>

zkSync 2.0 - это гигантский скачок в технологиях Layer 2. Это - долгожданное решение, предлагающее множество ранее недоступных для разработчиков Ethereum преимуществ.

* **EVM-совместимость** - zkSync - это EVM-совместимый ZK rollup, который поддерживает большинство распространненых смарт-контрактов EVM. Это значит, что, если у вас есть смарт-контракт для EVM, вы с легкостью можете портировать свой dApp на zkSync 2.0.
* **Этос-совместимость** - мы крайне привержены ценностям децентрализации и открытого исходного кода.  Весь наш код будет полностью открытым и zkSync будет следовать дорожной карте, которая предполагает полную децентрализацию секвенсора и генерации доказательств. Более того, мы будем исполнять дорожную карту по децентрализации всей нашей организации.
* **Уверенность** - в отличие от предыдущих методов, пытающихся предлагать решения по масштабированию Эфириума, которые в некоторых случаях предлагали меньшие гарантии безопасности, чем L1 (например, сайдчейны, плазма, оптимистический роллап), zkSync использует доказательства с нулевым разглашением, которые предлагают _100% безопасность_.
* **Перспективность** - экосистемные проекты, адаптирующие zkSync 2.0 сейчас, в будущем будут наслаждаться всеми улучшениями технологий без необходимости менять код. Среди ожидаемых улучшений:
  1. Технология прувера (доказатель (через ускорение/улучшение аппаратного обеспечения).
  2. Компилятор (интеграция современных языков пограммирования с поддержкой виртуальных машин низкого уровня - LLVM).
  3. Все новшества zkSync 3.0 (Гиперчейны и Гипермосты).

### Что такое zkEVM? <a href="#what-is-the-zkevm" id="what-is-the-zkevm"></a>

zkEVM - это название архитектуры, которая позволяет генерировать доказательство c нулевым разглашением для отслеживания исполнения смарт-контрактов, изначально написанных под Ethereum.

Его архитектура основана на следующих компонентах:

* zkVM, полная по Тьюрингу RISC-подобная виртуальная машина, оптимизированная для доказывания в схеме ZKP (zero-knowledge proof - доказательство с нулевым разглашением). Она имеет несколько различных реализаций:&#x20;
  * Исполнитель: быстрое нативное исполнение на CPU.
  * Генератор свидетельства: нативный исполнитель для генерации свидетельства ZKP.
  * Прувер(prover): собственно реализация схемы ZKP (доказательства с нулевым разглашением)
* Компилятор, основанный на LLVM с:
  * Фронтендом Solidity (точнее: фронтенд Yul).
  * Фронтендом Vyper.
  * Бэкендом zkVM.
* Схемы специального назначения (сильно полагаются на кастомные врата \[custom gates] и таблицы поиска\[lookup tables] PLONK) в виде “прекомпилятов” для вычислительноемких операций, таких как:
  * Неалгебраические хэши (Keccak, SHA256, Blake2).
  * Доступ к хранилищу (пути Merkle).
  * Пары эллиптических кривых.
* Схема рекурсивной аггрегации (комбинирует доказательства с вышеупомянутыми элементами).

#### zkEVM vs EVM <a href="#zkevm-vs-evm" id="zkevm-vs-evm"></a>

Помимо различий в операционных кодах (опкод) и расчетах газа, zkVM строго наследует программную модель EVM и ее инварианты, включая конвенции по вызову ABI. Одна важная вещь, которую нужно упомянуть - zkVM поддерживает откаты и доказуемо обратимые транзакции. Это гарантирует взаимную безопасность: пользователи не могут затормозить сеть путем ее бомбардировки обратимыми транзакциями, а запасной люк (в виде приоритетной очереди) защищает возможность пользователя включать любые транзакции в блоки.

Как результат, разработчики могут полностью положиться на резистентность к цензуре, предоставляемую со стороны L1 без необходимости вносить какие-либо изменения, связанные с механизмом запасного люка. Это значит, что активы на аккаунте zkRollup на zkSync будут иметь абсолютно те же гарантии безопасности, что и аккаунты на L1.

#### Улучшения EVM <a href="#evm-improvements" id="evm-improvements"></a>

Помимо поддержки максимально возможной совместимости, zkEVM имеет значительные преимущества перед EVM, которые позволяют упростить адаптацию и предоставить преимущества экосистемным проектам zkSync.

* **Наш компилятор основан на LLVM**. Основанные на LLVM (Low-Level Virtual Machine)  компиляторы стали компиляторами по умолчанию для систем Mac OS X, iOS, FreeBSD и Android, и они являются наиболее широко используемыми, потому что они:&#x20;
  * Позволяют нам увеличивать эффективность по сравнению с оригинальным байткодом, потому что с LLVM мы можем получить преимущество от многих оптимизаций и инструментов, доступных в этой зрелой экосистеме.
  * Прокладывают путь так, чтобы мы могли добавить поддержку интеграции кодовых баз на других языках программирования с фронтендом LLVM. Таким образом, разработчики смогут строить приложения и использовать блокчейны способами, недоступными на данный момент.
* **В наш zkEVM включена поддержка Абстракции Аккаунта**. Это - долгожданная функция в сообществе Эфириум-разработчков, которая улучшает принятие разработчиками и пользовательский опыт несколькими путями:
  * Нативная поддержка кошельков-смарт-контрактов (таких как Argent), что критически важно для привлечения мейнстрим-пользователей.
  * Гораздо лучший пользовательский опыт для мульти-подписей.
  * Транзакционные комиссии могут быть оплачены любым токеном при использовании [paymaster](https://v2-docs.zksync.io/dev/developer-guides/aa.html#paymasters)'ов.
  * Протоколы теперь могут субсидировать газ для пользователей прямо со своих смарт-контрактов, или даже подключать безгазовые транзакции.
  * Наборы транзакций (multicall) могут быть подтверждены одним кликом (огромная проблема пользовательного опыта в Ethereum на сегодняшний день).
  * [Узнайте больше о поддержке абстракции аккаунта в zkSync 2.0.](https://v2-docs.zksync.io/dev/developer-guides/aa.html)

### EVM-совместимость <a href="#evm-compatibility" id="evm-compatibility"></a>

Среди сообщества существуют заблуждения касательно различий между EVM-совместимостью и EVM-эквивалентностью. Для начала давайте определим, что эти оба термина означают.

* **Эквивалент EVM** значит, что данный протокол поддерживает любой опкод EVM Эфириума вплоть до уровня байткода. Таким образом, любой EVM-смарт-контракт будет со 100% уверенностью работать "из коробки".&#x20;
* **Совеместимость с EVM** значит, что поддерживается какой-то процент опкодов EVM Эфириум; таким образом, какой-то процент смарт-контрактов будет работать "из коробки".

zkSync оптимизирован под EVM-_совместимость_, а не под _эквивалентность_ по трем основным причинам:

1. Создание генерализированной схемы для EVM-эквивалентности вплоть до байткода было бы непростительно дорого и времязатратно.&#x20;
2. Мы смогли спроектировать систему, оптимизированную под производительность и доказуемость с нулевым разглашением (ZK), ведя разработку на основе опыта с zkSync 1.0.
3. Опкоды, которые мы решили НЕ поддживать или считаются устаревшими на самом Ethereum, или используются крайне редко. В случае, если проекту они (опкоды) понадобятся, то необходимое количество модификаций кода для работы с zkSync - минимально, и нет необходимости в дополнительном аудите безопасности.

Практически любой смарт-контракт, написанный под EVM будет поддерживаться в zkSync 2.0 и сохранит в себе все ключевые инварианты безопасности, так что в абсолютном большинстве случаев повторного аудита безопасности не потребуется. Исключением являются контракты, использующие следующие опкоды EVM:

* `CALLCODE` (объявлен устаревшим на Эфириуме в пользу `DELEGATECALL`).
* `EXTCODECOPY` (может быть реализован при необходимсоти, но на данный момент мы его пропустили, потому что опкоды zkEVM все равно не идентичны опкодам EVM)
* `SELFDESTRUCT` (считается вредным и есть призывы о его отключении на L1).
* `CODECOPY` - (он не возвращает 0, но вызывает ошибку компиляции).

Есть еще несколько различий, например, вычисление газа будет иным (что также применимо и к другим L2 решениям). Некоторые криптографически прекомпиляты EVM (а точнее пары и RSA) не будут доступны в первом релизе, но будут реализованы вскоре после запуска, при этом криптографические пары будут приоритетом, чтобы позвонить и Гиперчейнам, и протоколам по типу Aztec/Dark Forest также развертываться без дополнительных модификаций.

#### Ожидания по безопаности <a href="#security-expectations" id="security-expectations"></a>

Уровень доступа к данным дляzkSync 2.0 - Ethereum. Все участники экосистемы, которые ведут разработку на zkSync 2.0, унаследуют все преимущества в безопасности Ethereum.

Очевидно, что для нас эта тема критически важна, и мы находимся в процессе обширного пересмотра безопасности zkSync 2.0 (включая внешние аудиты, соревнования по безопасности, пересмотр и расширение нашей программы по поиску багов).

Мы вскоре расскажем об этом здесь более распространенно.

#### Инициирование аудитов безопасности <a href="#triggering-security-audits" id="triggering-security-audits"></a>

Хоть и существует несколько редко используемых опкодов, которые мы не поддерживаем, мы с участниками экосистемы не обнаружили ни одного случая, где критическим изменением было что-либо, кроме простого рефакторинга нескольких строк кода. Ни один из участников нашей экосистемы, кто портировался на zkSync, не докладывал о каких-либо изменениях, которые потребовали бы повторного аудита безопасности.

### Что такое Абстракция Аккаунта <a href="#what-is-account-abstraction" id="what-is-account-abstraction"></a>

