# Основы zkSync

### Прежде, чем начать <a href="#prerequisites" id="prerequisites"></a>

Если вы не знакомы с концепцией роллапов, вам следует [ознакомиться с ней](vvedenie-v-rollapy.md), прочитав информацию о ZK и оптимистических роллапах перед началом изучения zkSync.

### Введение <a href="#introduction" id="introduction"></a>

**zkSync -** это [ZK роллап](vvedenie-v-rollapy.md#what-are-zk-rollups) - протокол, не требующий доверия, который использует криптографические доказательства валидности для предоставления масштабируемости и дешивизны для транзакций в Эфириум. В zkSync вычисления производятся офф-чейн (вне сети), и большинство информации так же хранится офф-чейн. Так как все транзакции подтверждаются в основной сети Эфириум, пользователи получают тот же уровень безопасности, что и на Эфириум.

zkSync 2.0 создан для того, чтобы выглядеть и ощущаться как Эфириум, но с более низкими комиссиями. Так же, как и на Ethereum, смарт-контракты пишутся на Solidity/ Vyper и могут быть вызваны использованием тех же клиентов, что и на других EVM-совместимых сетях.

Нет необходимости регистрировать отдельный приватный ключ для использования zkSync. Существующие кошельки Эфириума работают "из коробки". В то же время, работа zkSync поддерживается исключительно серверами команды zkSync, и, таким образом, является централизованной. Однако, вскоре мы планируем перейти на децентрализованную модель.

### Обзор zkSync <a href="#zksync-overview" id="zksync-overview"></a>

Рабочий процесс роллапа обычно выглядит так:

* Пользователи могут получать, депонировать и отправлять активы друг другу.
* Пользователи могу выводить активы под своим контролем на адрес L1 (Layer 1).

Операции роллапов требуют помощи оператора, который связывает транзакции вместе, вычисляет доказательство нулевого разглашения правильного изменения состояния, а также влияет на изменение состояние путем взаимодействия с контрактом роллапа. Для понимания дизайна нам нужно посмотреть, как работают транзакции роллапа zkSync.

Операции zkSync делятся на роллап транзакции (инициированные внутри роллапа аккаунтом роллапа) и приоритетные операции (инициированные в основной сети аккаунтом в Эфириум).

Жизненный цикл операций zkSync следующий:

* Пользователь создает транзакцию или приоритетную операцию.
* После проведения запроса оператор создает роллап-операцию и добавляет ее в блок.
* Как только блок заполнен, оператор отправляет его в смарт-контракт zkSync для включения в блок. Часть логики некоторых операций роллапа проверяется смарт-контрактом.
* Доказательство для блока отправляется в смарт-контракт zkSync как верификация блока. Если верификация успешна, то новое состояние считается финальным.

Далее, на zkSync, от начала до финализации каждый блок L2 проходит через следующие четыре стадии:

* `Pending`: Транзакция получена оператором, но еще не проведена.
* `Processed`: Транзакция проведена оператором и одобрена для включения в следующий блок.
* `Committed`: Изменение статуса транзакции опубликовано в Эфириум. Это не доказывает, что она была исполнена валидным путем, но обеспечивает доступность информации в блоке.
* `Finalized`: Доказательство действительности SNARK для транзакции было отправлено и верифицировано смарт-контрактом. После этого этапа транзакция считается финализированной.

На данном этапе развития стандартное время для перехода транзакции из статуса `Processed` в `Finalized` - примерно пара часов.

Примите во внимание, что мы, для удобства разработчиков, обычно принимаем статусы `Processed` и `Committed` как один этап, называемый `Committed`, так как у них нет различий с точки зрения пользоватльского\девелоперского опыта.

#### Состояние zkSync <a href="#the-state-of-zksync" id="the-state-of-zksync"></a>

Текущая версия zkSync 2.0 удовляетворяет потребностям большинства приложений на Ethereum, и, с бОльшим количеством функций, запланированных к релизу в ближайшее время, zkSync предоставит разработчикам пространство для экспериментов с приложениями, которые невозможны на сегодняшнем Эфириуме. С данным релизом мы поддерживаем следующие функции:

* **Нативная поддержка ECDSA-подписей.** В отличие от первой версии zkSync и большей части ZK-решений, для регистрации закрытого ключа пользователя не требуется никаких специальных операций. Любой учетной записью можно управлять на L2 с тем же закрытым ключом, который используется на L1.
* **Поддержка Solidity 0.8.x.** Разверните вашу кодовую базу без\с минимальными изменениями.
* **Web3 API**. С небольшими исключениями, наш Web3 API полностью совместим с Ethereum. Это позволяет бесшовно интегрироваться с существующими индексаторами, обозревателями и т.д.
* **Поддержка криптографических примитивов Ethereum**. zkSync нативно поддерживает`keccak256`, `sha256`, и `ecrecover` через предварительную компиляцию (precompiles) .
* **Hardhat плагин**. Он позволяет легко тестировать и разрабатывать смарт-контракты на zkSync.
* **L1 -> L2 коммуникация между смарт-контрактами**. Позволяет разработчикам передавать данные со смарт-контрактов Эфириум на смарт-контракты zkSync, предоставляя требуемую информацию для работы различных смарт-контрактов.

Некоторые функции, которые мы собираемся внедрить в будущих обновлениях, не включены в наш текущий тестнет. Среди них:&#x20;

* **zkPorter.** Одна из крупнейших и важнейших функций. Она позволит пользователям выбирать между аккаунтом zkRollup с высокой безопасностью и 20x снижением комиссий по сравнению с Ethereum, и аккаунтом zkPorter c безопасностью гораздо выше, чем у сайдчейна и почти постоянную стоимость тразакций в несколько центов. Оба аккаунта: и zkRollup и zkPorter смогут взаимодействовать параллельно без конфликтом и "под капотом".

### &#x20;zkSync в сравнении

zkSync [ярко выделяется](https://blog.matter-labs.io/evaluating-ethereum-l2-scaling-solutions-a-comparison-framework-b6b2f410f955) в аспектах безопасности и удобства использования среди существующих L2 решений для масштабирования. Благодаря комбинации передовой криптографии и доступности он-чейн данных, ZK роллапы (ядро сети zkSync) являются единственным L2 решением для масштабирования, которое не требует никакой операционной активности для сохранения средств в безопасности. Например, пользователи могут отключаться и по-прежнему быть способными безопасно вывести свои активы, когда подключаться обратно, даже если валидаторы ZK роллапа уже не работают.

### Характеристики zkSync <a href="#zksync-characteristics" id="zksync-characteristics"></a>

* Переводы ETH и токенов ERC20 с мгновенным подтверждением и быстрой финальностью на L1.
* Супер низкие транзакционные издержки для переводов ETH и токенов ERC20 по сравнению с Ethereum.
* Счета в пользу существующих Эфириум адресов (включая смарт-контракты) могут быть удобно оплачены переводимым токеном.

### Особенности zkSync 2.0 <a href="#highlights-of-zksync-2-0" id="highlights-of-zksync-2-0"></a>

* Безопасность уровня Mainnet без необходимости полагаться на 3ьи стороны.
* EVM-совместимые смарт-контракты, не требующие разрешения.
* Стандартный Web3 API.
* Сохранение ключевых функций EVM, таких как компонуемость смарт-контрактов.
* Привнесение новых функцих, таких как абстракция аккаунта.

### Как начать? <a href="#how-to-get-started" id="how-to-get-started"></a>

* Начните с построения децентрализованного приложения (dApp) в разделе [Быстрый старт](https://v2-docs.zksync.io/dev/developer-guides/hello-world.html).
* Ознакомьтесь с информацией о RPC-узлах, кошельке и обозревателе блоков на странице [Важные ссылки](https://v2-docs.zksync.io/dev/troubleshooting/important-links.html).
