# Транзакции

Транзакции в Эфириум - это инструкции, подписанные криптографически аккаунтом с внешним владельцем (т.е. EOA - аккаунт, принадлежащий пользователю, а не коду). Эти инструкции хранятся в блокчейне и добавляются в блоки. Состояние виртуальной машины Эфириум (EVM) меняется, когда инициируется транзакция. Транзакцией может быть что угодно от отправки эфира на другой аккаунт до вызова функций смарт-контракта.

### Подготовка <a href="#prerequisite" id="prerequisite"></a>

Мы рекомендуем вам сначала познакомиться с [концепцией аккаунтов](https://ethereum.org/en/developers/docs/accounts/) для лучшего понимания данного раздела.

### Как работают транзакции <a href="#how-transactions-work" id="how-transactions-work"></a>

Когда пользователь инициирует транзакцию на Ethereum, создаются специфические данные:

* Receiver: т.е. Получатель - это адрес аккаунта, получающий транзакцию. Получателем может быть контракт или обычный аккаунт(ЕОА). Любая транзакция всегда направлена в пользу какого-либо получателя.
* Nonce: Данное поле отображает последнюю транзакцию,  основанную на счетчике аккаунта, который отслеживает, какое количество транзакций выполнил данный аккаунт. Сеть использует nonce транзакции, чтобы удостовериться, что транзакции проходят в правильном порядке.
* Gas Price: Большинство транзакций требуют от автора транзакции оплаты комиссии. Ее сумма вычисляется за единицу газа. Эта единица - Wei - маленькая  единица эфира.
* Gas Limit: Автор транзакции задает количество единиц газа, используемых для транзакции. Это и будет максимальной суммой газа, которая может быть использована.
* Value: Количество Wei или эфира, которое отправитель хочет перевести получателю задается отражается в параметре value.
* Data: Если получатель транзакции - смарт-контракт, то поле data включает в себя данные для выполнения функций контракта. Data включает в себя данные различной длины.
* Signature: Подпись указывать на отправителя информации. Подпись создается в тот момент, когда аккаунт с внешним владением (ЕОА) подтверждает и подписывает транзакцию своим приватным ключом.

#### Типы транзакций <a href="#transaction-types" id="transaction-types"></a>

* Простые, или перевод средств: Обычный перевод токенов в форме эфира с одного аккаунта на другой.
* Транзакции развертывания контракта: развертывание контракта на zkSync немного отличается от Эфириум.
  * Ethereum: Развертывание контракта происходит, когда пользователь отправляет транзакцию на нулевой адрес `(0x000...000)`, в которой поле `data` эквивалентно байткоду контракта, связанного с параметрами конструктора.
  * zkSync: Для развертывания контракта на zkSync пользователь вызывает функцию [ContractDeployer](https://v2-docs.zksync.io/dev/developer-guides/contracts/system-contracts.html#contractdeployer)'a `create` и предоставляет хэш публикуемого контракта наряду с аргументами конструктора. Сам же байткод контракта вставляется в поле `factory_deps` транзакции типа EIP712. Если контракт является фабрикой (т.е. может развертывать другие контракты), то байт-коды этих контрактов тоже должны быть включены в `factory_deps.` Узнайте больше о [развертывании контракт](https://v2-docs.zksync.io/dev/developer-guides/contracts/contracts.html)[ов](https://v2-docs.zksync.io/dev/developer-guides/contracts/contracts.html).

{% hint style="success" %}
**СОВЕТ**

zkSync поддерживает "старые" (pre-EIP2718) типы транзакций Эфириум, тип транзакций EIP1559, а также кастомные транзакции EIP712. Транзакции этого типа можно использовать для таких специфичных функций zkSync, как абстракция аккаунта. Кроме того, смарт-контракты можно развертывать только с помощью этого типа транзакций.&#x20;

Для использования SDK zkSync знать подробности о формате транзакций не требуется , но если вам интересно, вы можете прочитать об этом [здесь](https://v2-docs.zksync.io/api/api.html#eip712).
{% endhint %}

#### Когда транзакция считается финальной? <a href="#when-is-a-transaction-considered-final" id="when-is-a-transaction-considered-final"></a>

В контексте технологии блокчейн, **финальность транзакции** значит, что они (транзакции) не могут быть отменены или изменены.

В Эфириуме, как и в Биткоине, финальность вероятностна, т.е. чем больше блоков прошло с момента обработки транзакции, тем меньше шансов, что эта транзакция будет отменена.

В ZK Rollups как только блок  заполняется и запечатывается, его состояние привязывается к основной сети Эфириума. Затем инициируется этап доказывания, и для всех транзакций внутри блока генерируется доказательство действительности SNARK. По завершении, SNARK используется для проверки по смарт-контракту на L1, и после проверки состояние транзакции становится финальным.

Обратите внимание, что _финальность_ с точки зрения zkSync происходит, когда транзакция (проверка SNARK) проведена на L1. На этом этапе гарантии финальности точно такие же, как и для любой другая транзакция на L1 в рамках того же блока L1; чем больше блоков L1 генерируется после обработки данного блока, тем меньше шансов, что эта транзакция будет отменена.

В данный момент, когда пользователь отправляет транзакцию, zkSync ожидает, пока весь блок не будет заполнен, что означает, что время финальности может быть больше и зависит от объема транзакций, отправленных через zkSync. По мере увеличения пропускной способности время финальности значительно уменьшится.

### Что такое Операторы? <a href="#what-are-operators" id="what-are-operators"></a>

**Операторы** являются субъектами, которые выполняют основные функции ZK Rollups. Они отвечают за создание блоков, объединение транзакций, выполнение расчетов и представление данных в основную сеть Эфириума для подтверждения.
